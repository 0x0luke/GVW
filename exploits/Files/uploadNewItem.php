<?php require "../../config/database.php";

if(!(isset($_SESSION["loggedin"]) && $_SESSION["loggedin"] === true && (isset($_SESSION["seller"]) && $_SESSION["seller"] == true))){
	header("location: http://127.0.0.1:8080/exploits/SQLi/items.php");
	echo "must be logged in to a seller account to upload";
    exit;
}

$category = mysqli_query($con,"SELECT * FROM `GVWA`.`categories` ORDER BY `categories`.`name` ASC");
#$category = mysqli_fetch_all($category);

#$returnResult = []; //initialise empty array
while($row = $category->fetch_assoc())
{
    $returnResult[] = $row;
}
$category = $returnResult;
?>


<!DOCTYPE html>
<html>

<head>
<u> Login page </u>
<link href="../../CSS/login.css" rel="stylesheet" type="text/css"> 
</head>

<body>
<div id="form">
<form action="fileUpload.php" method="POST" enctype="multipart/form-data">

<p>
<label> Item Name </label>
<input type="text" id="name" name="name" required/>
</p>

<p>
<label> Item Price </label>
<input type="text" id="price" name="price" required/>
</p>

<div class="search-box">
    <select id="category" name="category" multiple="multiple" required>
        <?php
            if (! empty($category)) {
                 foreach ($category as $key => $value) { 
                    echo '<option value="' . implode($category[$key]) . '">' . implode($category[$key]) . '</option>';
                 }
             }
        ?>
    </select>
</div>

<p>
<label> Description </label>
<input type="text" id="description" name="description" required/>
</p>

<p>
<label> Seller </label>
<input type="text" value= "Robert" id="seller" name="seller"/>
</p>

<p>
<label> Item image: </label>
<input type="file" name="image" id="image" required>
</p>

<p>
<input type="submit" id="button" value="submit"/>
</p>

</form>
</div>
